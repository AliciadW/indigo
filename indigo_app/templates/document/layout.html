{% extends "layout.html" %}

{% load pipeline %}
{% load static %}


{% block header %}
  <span data-document-id="{{ document.id|default:"" }}"></span>
  <h4 class="document-title">{{ document.title }}</h4>

  <nav class="menu">
    <div class="btn-toolbar">
      <div class="btn-group">
        <button type="button" class="btn btn-link dropdown-toggle" data-toggle="dropdown">File</button>
        <ul class="dropdown-menu">
          <li class="save"><a href="#">Save</a></li>
          <li><a href="#">Recent Changes</a></li>
          <li><a href="#">Delete</a></li>
          <li><a href="#">Download as...</a></li>
          <li role="separator" class="divider"></li>
          <li><a href="{% url 'library' %}">Library</a></li>
          <li role="separator" class="divider"></li>
          <li><a href="{% url 'new_document' %}">New Document</a></li>
          <li><a href="{% url 'import_document' %}">Import a Document</a></li>
        </ul>
      </div>

      <div class="btn-group">
        <button type="button" class="btn btn-link dropdown-toggle" data-toggle="dropdown">Edit</button>
        <ul class="dropdown-menu">
          <li><a href="#">Cut</a></li>
          <li><a href="#">Copy</a></li>
          <li><a href="#">Paste</a></li>
          <li role="separator" class="divider"></li>
          <li><a href="#">Undo</a></li>
          <li><a href="#">Redo</a></li>
        </ul>
      </div>

      <div class="btn-group">
        <button type="button" class="btn btn-link dropdown-toggle" data-toggle="dropdown">Help</button>
        <ul class="dropdown-menu">
          <li><a href="http://indigo.readthedocs.org/en/latest/" target="_blank">Indigo Help</a></li>
          <li><a href="#cheatsheet-modal" data-toggle="modal">Editor Cheatsheet</a></li>
          {% if SUPPORT_EMAIL %}
          <li><a href="mailto:{{ SUPPORT_EMAIL }}" target="_blank">Request an account</a></li>
          {% endif %}
          <li><a href="mailto:greg@code4sa.org" target="_blank">Feedback</a></li>
          <li role="separator" class="divider"></li>
          <li><a href="https://github.com/Code4SA/indigo" target="_blank">Indigo on GitHub</a></li>
        </ul>
      </div>
    </div>
  </nav>
{% endblock %}


{% block header-buttons %}
  <button class="btn btn-default save" disabled style="display: none"><i class="fa fa-save"></i> Save</button>
{% endblock %}


{% block content %}
  {% include "document/_sidebar.html" %}

  <div class="workspace-content">
    {% block main-content %}{% endblock %}
  </div>
{% endblock %}

{% block head-css %}
  {{ block.super }}

  {% if DEBUG and INDIGO_LIME_DEBUG %}
    {# CSS for development LIME #}

    <link rel="stylesheet" href="/static/lime/develop/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="/static/lime/develop/resources/stylesheets/extjs4.editor.css" />
    <link rel="stylesheet" type="text/css" href="/static/lime/develop/resources/stylesheets/extjs4.viewport.css" />

  {% else %}
    {# CSS for production LIME #}
    {% stylesheet "lime" %}
  {% endif %}

{% endblock %}

{% block js %}
  {{ block.super }}
  <script type="text/javascript" src="/static/javascript/ace/ace.js"></script>

  <!-- LIME stuff -->

  {% if DEBUG and INDIGO_LIME_DEBUG %}
    {# development dependencies for LIME so that we don't have to recompile it the whole time #}

    <script>var LIME_base_url = '/static/lime/develop/';</script>
    <script src="/static/lime/develop/ext/ext-all-dev.js"></script>
    <script src="/static/lime/develop/bootstrap.js"></script>
    <script src="/static/lime/develop/app.js"></script>

    <!-- Load EXTJS4 extension for tinyMCE -->
    <script type="text/javascript" src="/static/lime/develop/lib/tinymce4/tinymce.min.js"></script>
    <script type="text/javascript" src="/static/lime/develop/lib/vkbeautify/vkbeautify.js"></script>

  {% else %}
    {# production dependencies for LIME #}
    <script>
var LIME_base_url = '/static/lime/dist/';
var LIME_bootstrap_scripts = [
  '{% static 'lime-bootstrap.js' %}',
  // these need to be loaded separately due to the way they load their dependent scripts
  '/static/lime/dist/lib/vkbeautify/vkbeautify.js',
];
    </script>
    <script type="text/javascript" src="/static/lime/dist/lib/tinymce4/tinymce.min.js"></script>
  {% endif %}

{% endblock %}
